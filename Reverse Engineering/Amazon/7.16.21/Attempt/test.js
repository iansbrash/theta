const calculate = (r) => {
    let crcTable = buildCrcTable();

    var t, e = 0;
    e ^= 4294967295;
    for (var c = 0; c < r.length; c++) t = 255 & (e ^ r.charCodeAt(c)), e = e >>> 8 ^ crcTable[t];
    return 4294967295 ^ e
} 

const buildCrcTable = () => {
    let crcTable = [];
    for (var t = 0; t < 256; t++) {
        for (var e = t, c = 0; c < 8; c++) 1 == (1 & e) ? e = e >>> 1 ^ 3988292384 : e >>>= 1;
        crcTable[t] = e
    }

    return crcTable;
}

const encode = (t) => {
    return ['0123456789ABCDEF'.charAt(t >>> 28 & 15), '0123456789ABCDEF'.charAt(t >>> 24 & 15), '0123456789ABCDEF'.charAt(t >>> 20 & 15), '0123456789ABCDEF'.charAt(t >>> 16 & 15), '0123456789ABCDEF'.charAt(t >>> 12 & 15), '0123456789ABCDEF'.charAt(t >>> 8 & 15), '0123456789ABCDEF'.charAt(t >>> 4 & 15), '0123456789ABCDEF'.charAt(15 & t)].join('')
}

let str = '{"metrics":{"el":0,"script":0,"h":0,"batt":0,"perf":1,"auto":0,"tz":0,"fp2":0,"lsubid":1,"browser":0,"capabilities":0,"gpu":0,"dnt":0,"math":0,"tts":1,"input":0,"canvas":0,"captchainput":0,"pow":0},"start":1626576916853,"interaction":{"clicks":0,"touches":0,"keyPresses":0,"cuts":0,"copies":0,"pastes":0,"keyPressTimeIntervals":[],"mouseClickPositions":[],"keyCycles":[],"mouseCycles":[81],"touchCycles":[]},"scripts":{"dynamicUrls":["https://c.amazon-adsystem.com/bao-csm/forensics/a9-tq-forensics-incremental.min.js","https://images-na.ssl-images-amazon.com/images/I/31YXrY93hfL.js","https://images-na.ssl-images-amazon.com/images/I/61-6nKPKyWL._RC|11Y+5x+kkTL.js,51KMV3Cz2XL.js,31x4ENTlVIL.js,31f4+QIEeqL.js,01N6xzIJxbL.js,518BI433aLL.js,01rpauTep4L.js,31QZSjMuoeL.js,61ofwvddDeL.js,01KsMxlPtzL.js_.js?AUIClients/AmazonUI","https://images-na.ssl-images-amazon.com/images/I/21G215oqvfL._RC|21OJDARBhQL.js,218GJg15I8L.js,31lucpmF4CL.js,2119M3Ks9rL.js,51pHXSL0+8L.js_.js?AUIClients/AuthenticationPortalAssets","https://images-na.ssl-images-amazon.com/images/I/01wGDSlxwdL.js?AUIClients/AuthenticationPortalInlineAssets","https://images-na.ssl-images-amazon.com/images/I/31wFiUhQ5CL.js?AUIClients/CVFAssets","https://images-na.ssl-images-amazon.com/images/I/81oDzXaLrLL.js?AUIClients/SiegeClientSideEncryptionAUI","https://images-na.ssl-images-amazon.com/images/I/716U66oCsOL.js?AUIClients/FWCIMAssets","https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js"],"inlineHashes":[-1746719145,-1083297690,135822581,-314038750,-682620762,216868775,1424856663,-1473492032,318224283,1251695250,2073308497,4606827,-1611905557,1800521327,2118020403,1532181211,-1983510763,331421908],"elapsed":12,"dynamicUrlCount":9,"inlineHashesCount":18},"history":{"length":4},"battery":{},"performance":{"timing":{"connectStart":1626576909479,"navigationStart":1626576909435,"loadEventEnd":1626576916442,"domLoading":1626576909733,"secureConnectionStart":1626576909505,"fetchStart":1626576909436,"domContentLoadedEventStart":1626576909853,"responseStart":1626576909717,"responseEnd":1626576909821,"domInteractive":1626576909853,"domainLookupEnd":1626576909479,"redirectStart":0,"requestStart":1626576909529,"unloadEventEnd":1626576909727,"unloadEventStart":1626576909725,"domComplete":1626576916433,"domainLookupStart":1626576909442,"loadEventStart":1626576916433,"domContentLoadedEventEnd":1626576909856,"redirectEnd":0,"connectEnd":1626576909529}},"automation":{"wd":{"properties":{"document":[],"window":[],"navigator":[]}},"phantom":{"properties":{"window":[]}}},"end":1626576921870,"timeZone":-6,"flashVersion":null,"plugins":"Chrome PDF Plugin Chrome PDF Viewer Native Client ||1920-1200-1160-24-*-*-*","dupedPlugins":"Chrome PDF Plugin Chrome PDF Viewer Native Client ||1920-1200-1160-24-*-*-*","screenInfo":"1920-1200-1160-24-*-*-*","lsUbid":"X79-7568382-0846927:1626575693","referrer":"https://www.amazon.com/ap/signin?openid.pape.max_auth_age=0&openid.return_to=https%3A%2F%2Fwww.amazon.com%2F%3Fref_%3Dnav_signin&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=usflex&openid.mode=checkid_setup&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36","location":"https://www.amazon.com/ap/signin","webDriver":false,"capabilities":{"css":{"textShadow":1,"WebkitTextStroke":1,"boxShadow":1,"borderRadius":1,"borderImage":1,"opacity":1,"transform":1,"transition":1},"js":{"audio":true,"geolocation":true,"localStorage":"supported","touch":false,"video":true,"webWorker":true},"elapsed":0},"gpu":{"vendor":"Google Inc. (Intel)","model":"ANGLE (Intel, Intel(R) UHD Graphics Direct3D11 vs_5_0 ps_5_0, D3D11-27.20.100.9168)","extensions":["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_float_blend","EXT_frag_depth","EXT_shader_texture_lod","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic","EXT_sRGB","KHR_parallel_shader_compile","OES_element_index_uint","OES_fbo_render_mipmap","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture","WEBGL_draw_buffers","WEBGL_lose_context","WEBKIT_WEBGL_lose_context","WEBGL_multi_draw"]},"dnt":1,"math":{"tan":"-1.4214488238747245","sin":"0.8178819121159085","cos":"-0.5753861119575491"},"form":{"ap-credential-autofill-hint":{"clicks":0,"touches":0,"keyPresses":0,"cuts":0,"copies":0,"pastes":0,"keyPressTimeIntervals":[],"mouseClickPositions":[],"keyCycles":[],"mouseCycles":[],"touchCycles":[],"width":0,"height":0,"totalFocusTime":0,"prefilled":true},"password":{"clicks":0,"touches":0,"keyPresses":0,"cuts":0,"copies":0,"pastes":0,"keyPressTimeIntervals":[],"mouseClickPositions":[],"keyCycles":[],"mouseCycles":[],"touchCycles":[],"width":296,"height":31,"totalFocusTime":0,"prefilled":false}},"token":{"isCompatible":true,"pageHasCaptcha":0},"auth":{"form":{"method":"post"}},"errors":[],"version":"4.0.0"}'

console.log(encode(calculate(str)))